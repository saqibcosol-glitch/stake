{"version":"0.1.0","name":"solana_staking_referral","instructions":[{"name":"initialize","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"tokenMint","isMut":false,"isSigner":false},{"name":"rewardMint","isMut":false,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"rewardVault","isMut":true,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"rewardRate","type":"u64"},{"name":"enableReferral","type":"bool"}]},{"name":"stakeWithReferral","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"userStake","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"feeReceiverAccount","isMut":true,"isSigner":false},{"name":"referrerStats","isMut":true,"isSigner":false,"isOptional":true},{"name":"referrerUserStake","isMut":true,"isSigner":false,"isOptional":true},{"name":"referrerStatsL2","isMut":true,"isSigner":false,"isOptional":true},{"name":"l2UserStake","isMut":true,"isSigner":false,"isOptional":true},{"name":"referrerStatsL3","isMut":true,"isSigner":false,"isOptional":true},{"name":"user","isMut":true,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"},{"name":"referrer","type":{"option":"publicKey"}}]},{"name":"claimRewards","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"userStake","isMut":true,"isSigner":false},{"name":"rewardVault","isMut":true,"isSigner":false},{"name":"userRewardAccount","isMut":true,"isSigner":false},{"name":"feeReceiverAccount","isMut":true,"isSigner":false},{"name":"referrerStatsL1","isMut":true,"isSigner":false,"isOptional":true},{"name":"referrerStatsL2","isMut":true,"isSigner":false,"isOptional":true},{"name":"referrerStatsL3","isMut":true,"isSigner":false,"isOptional":true},{"name":"user","isMut":true,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"claimReferralRewards","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"referrerStats","isMut":true,"isSigner":false},{"name":"rewardVault","isMut":true,"isSigner":false},{"name":"referrerRewardAccount","isMut":true,"isSigner":false},{"name":"referrer","isMut":true,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"unstake","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"userStake","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"feeReceiverAccount","isMut":true,"isSigner":false},{"name":"referrerStats","isMut":true,"isSigner":false,"isOptional":true},{"name":"referrerStatsL2","isMut":true,"isSigner":false,"isOptional":true},{"name":"referrerStatsL3","isMut":true,"isSigner":false,"isOptional":true},{"name":"user","isMut":true,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"updateFees","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"feeStake","type":"u64"},{"name":"feeUnstake","type":"u64"},{"name":"feeClaim","type":"u64"},{"name":"newReceiver","type":"publicKey"}]},{"name":"updateReferralRates","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"l1","type":"u16"},{"name":"l2","type":"u16"},{"name":"l3","type":"u16"}]},{"name":"updateLockDuration","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"duration","type":"i64"}]},{"name":"updateRewardRate","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"newRate","type":"u64"}]},{"name":"setPauseState","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"paused","type":"bool"}]},{"name":"toggleReferralSystem","accounts":[{"name":"stakingPool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"enabled","type":"bool"}]},{"name":"withdrawTokens","accounts":[{"name":"stakingPool","isMut":false,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"adminTokenAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"initializeReferrerStats","accounts":[{"name":"referrerStats","isMut":true,"isSigner":false},{"name":"referrer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"addRewards","accounts":[{"name":"stakingPool","isMut":false,"isSigner":false},{"name":"rewardVault","isMut":true,"isSigner":false},{"name":"funderRewardAccount","isMut":true,"isSigner":false},{"name":"funder","isMut":true,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]}],"accounts":[{"name":"StakingPool","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"tokenMint","type":"publicKey"},{"name":"rewardMint","type":"publicKey"},{"name":"stakingVault","type":"publicKey"},{"name":"rewardVault","type":"publicKey"},{"name":"feeReceiver","type":"publicKey"},{"name":"rewardPerTokenStored","type":"u128"},{"name":"rewardRate","type":"u64"},{"name":"totalStaked","type":"u64"},{"name":"feeStake","type":"u64"},{"name":"feeUnstake","type":"u64"},{"name":"feeClaim","type":"u64"},{"name":"minStakeAmount","type":"u64"},{"name":"lastUpdateTime","type":"i64"},{"name":"lockDuration","type":"i64"},{"name":"referralL1Bps","type":"u16"},{"name":"referralL2Bps","type":"u16"},{"name":"referralL3Bps","type":"u16"},{"name":"referralEnabled","type":"bool"},{"name":"paused","type":"bool"},{"name":"bump","type":"u8"}]}},{"name":"UserStake","type":{"kind":"struct","fields":[{"name":"user","type":"publicKey"},{"name":"pool","type":"publicKey"},{"name":"stakedAmount","type":"u64"},{"name":"rewardPerTokenPaid","type":"u128"},{"name":"rewardPending","type":"u64"},{"name":"lastStakeTime","type":"i64"},{"name":"referrer","type":{"option":"publicKey"}},{"name":"referrerL2","type":{"option":"publicKey"}},{"name":"referrerL3","type":{"option":"publicKey"}},{"name":"totalEarned","type":"u64"}]}},{"name":"ReferrerStats","type":{"kind":"struct","fields":[{"name":"referrer","type":"publicKey"},{"name":"totalReferrals","type":"u64"},{"name":"totalCommissionEarned","type":"u64"},{"name":"pendingRewards","type":"u64"},{"name":"volumeReferred","type":"u64"},{"name":"activeStakeL1","type":"u64"},{"name":"activeStakeL2","type":"u64"},{"name":"activeStakeL3","type":"u64"}]}}],"events":[{"name":"NewReferral","fields":[{"name":"user","type":"publicKey","index":false},{"name":"referrer","type":"publicKey","index":false},{"name":"timestamp","type":"i64","index":false}]},{"name":"Staked","fields":[{"name":"user","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false},{"name":"timestamp","type":"i64","index":false}]},{"name":"Unstaked","fields":[{"name":"user","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false},{"name":"timestamp","type":"i64","index":false}]},{"name":"RewardsClaimed","fields":[{"name":"user","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false},{"name":"timestamp","type":"i64","index":false}]}],"errors":[{"code":6000,"name":"ZeroAmount","msg":"Amount must be greater than zero"},{"code":6001,"name":"PoolPaused","msg":"Pool is paused"},{"code":6002,"name":"SelfReferral","msg":"Cannot refer yourself"},{"code":6003,"name":"MathOverflow","msg":"Math overflow"},{"code":6004,"name":"InsufficientStakedAmount","msg":"Insufficient staked amount"},{"code":6005,"name":"MinimumStakePeriodNotMet","msg":"Minimum stake period not met"},{"code":6006,"name":"NoRewardsToClaim","msg":"No rewards to claim"},{"code":6007,"name":"InvalidReferrerAccount","msg":"Invalid referrer account"},{"code":6008,"name":"BelowMinimumStake","msg":"Amount is below minimum stake"},{"code":6009,"name":"ReferralRatesExceedMax","msg":"Total referral rates exceed 25%"}]}